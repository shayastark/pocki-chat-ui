[Skip to main content](https://docs.privy.io/basics/react/advanced/migrating-to-2.0#content-area)

[Privy Docs home page![light logo](https://mintcdn.com/privy-c2af3412/Ih_Fo3QYM486gzWq/logo/privy-logo-light.png?fit=max&auto=format&n=Ih_Fo3QYM486gzWq&q=85&s=bd297b680ace8a13db4d9ce977f93180)![dark logo](https://mintcdn.com/privy-c2af3412/Ih_Fo3QYM486gzWq/logo/privy-logo-dark.png?fit=max&auto=format&n=Ih_Fo3QYM486gzWq&q=85&s=24d83970695ab19a1803a2eb00dbea4e)](https://docs.privy.io/)

Search...

âŒ˜K

Search...

Navigation

Advanced

Migrating to 2.0

[Welcome](https://docs.privy.io/welcome) [Basics](https://docs.privy.io/basics/get-started/about) [Authentication](https://docs.privy.io/authentication/overview) [Wallets](https://docs.privy.io/wallets/overview) [Connectors](https://docs.privy.io/wallets/connectors/overview) [Policies & controls](https://docs.privy.io/controls/overview) [Transaction management](https://docs.privy.io/transaction-management/overview) [User management](https://docs.privy.io/user-management/overview) [Security](https://docs.privy.io/security/overview) [Recipes](https://docs.privy.io/recipes/overview) [API reference](https://docs.privy.io/api-reference/introduction)

On this page

- [New features and improvements ðŸŽ‰](https://docs.privy.io/basics/react/advanced/migrating-to-2.0#new-features-and-improvements-%F0%9F%8E%89)
- [Breaking changes](https://docs.privy.io/basics/react/advanced/migrating-to-2.0#breaking-changes)
- [Authentication](https://docs.privy.io/basics/react/advanced/migrating-to-2.0#authentication)
- [Embedded wallets](https://docs.privy.io/basics/react/advanced/migrating-to-2.0#embedded-wallets)
- [EVM](https://docs.privy.io/basics/react/advanced/migrating-to-2.0#evm)
- [Smart Wallets](https://docs.privy.io/basics/react/advanced/migrating-to-2.0#smart-wallets)
- [Solana](https://docs.privy.io/basics/react/advanced/migrating-to-2.0#solana)
- [Connectors](https://docs.privy.io/basics/react/advanced/migrating-to-2.0#connectors)
- [Callbacks](https://docs.privy.io/basics/react/advanced/migrating-to-2.0#callbacks)

This guide will help you migrate your Privy React SDK from v1.x.x to v2.0.0.To install the latest version, install the package from the `latest` tag:

Report incorrect code

Copy

Ask AI

```
npm i @privy-io/react-auth@latest
```

## [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-2.0\#new-features-and-improvements-%F0%9F%8E%89)  New features and improvements ðŸŽ‰

- Removed ethers v5 dependency, allowing developers to more easily use ethers v6
- Added support for submitting transactions without waiting for confirmation
- Added UIs for Ethereum signTransaction

For the full set of changes check out our [changelog](https://docs.privy.io/changelogs/react-auth).

## [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-2.0\#breaking-changes)  Breaking changes

### [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-2.0\#authentication)  Authentication

- Guaranteed that `user.wallet` is the first linked wallet on the user object. To maintain state of the latest connected wallet, interact with the wallets array directly.
- Removed the `forkSession` method. This feature was experimental and has been removed.
- Removed the `PrivyProvider`â€™s deprecated `onSuccess` prop - use the `onSuccess` callback registered via the `useLogin` hook instead.

### [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-2.0\#embedded-wallets)  Embedded wallets

- Apps using [custom auth providers](https://docs.privy.io/authentication/user-authentication/jwt-based-auth/overview) must now explicitly configure wallet UIs in the dashboard, or use the updated `showWalletUIs` option.
- Removed the `PrivyProvider`â€™s deprecated `createPrivyWalletOnLogin` prop. Use `config.embeddedWallets.createOnLogin` instead.

Report incorrect code

Copy

Ask AI

```
<PrivyProvider
  createPrivyWalletOnLogin={true} // Remove
  config={{
    embeddedWallets: {createOnLogin: 'users-without-wallets'} // Add
  }}
>
  ...
</PrivyProvider>
```

- Removed the deprecated `additionalChains` and `rpcConfig` props from `PrivyProvider` config, please configure these via the `supportedChains`

Report incorrect code

Copy

Ask AI

```
<PrivyProvider
  config={{
    additionalChains: [], // Remove
    rpcConfig: {}, // Remove
    supportedChains: [] // Add
  }}
>
  ...
</PrivyProvider>
```

- Removed the deprecated `noPromptOnSignature` configuration option. Configure wallet UIs in the dashboard, or use the updated `showWalletUIs` option.

Report incorrect code

Copy

Ask AI

```
<PrivyProvider
  config={{
    embeddedWallets: {
      noPromptOnSignature: true, // Remove
      showWalletUIs: false // Add
    }
  }}
>
  ...
</PrivyProvider>
```

#### [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-2.0\#evm)  EVM

- Removed the deprecated `getEthersProvider` and `getWeb3jsProvider` from the `ConnectedWallet` class. Use `getEthereumProvider` instead.

Report incorrect code

Copy

Ask AI

```
const provider = await wallet.getEthersProvider();
const privyProvider = await wallet.getEthereumProvider();
const provider = new ethers.providers.Web3Provider(privyProvider);

const provider = await wallet.getWeb3jsProvider();
const privyProvider = await wallet.getEthereumProvider();
const provider = new Web3(privyProvider);
```

- Ethereum `sendTransaction` method now returns a `Promise<{hash: string}>` instead of a `Promise<TransactionReceipt>`. To get the full details of the submitted transaction, use a library like [viem](https://viem.sh/docs/actions/public/getTransactionReceipt).

Report incorrect code

Copy

Ask AI

```
const receipt = await sendTransaction({...});
const {hash} = await sendTransaction({...});
const receipt = await publicClient.waitForTransactionReceipt({hash});
```

- Removed the experimental `waitForTransactionConfirmation` config option as it is the default behavior.

Report incorrect code

Copy

Ask AI

```
<PrivyProvider
  config={{
    embeddedWallets: {
      waitForTransactionConfirmation: false
    }
  }}
>
  ...
</PrivyProvider>
```

- Updated `signMessage`, `signTypedData`, `sendTransaction`, and `signTransaction` methods:

- signMessage

- signTypedData

- sendTransaction

- signTransaction


Report incorrect code

Copy

Ask AI

```
const {signMessage} = usePrivy();
// `uiOptions` and `address` are optional
const signature = await signMessage(message, uiOptions, address);
// the first argument should be formatted `{message: string}`
const {signature} = await signMessage({message}, {uiOptions, address});
```

#### [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-2.0\#smart-wallets)  Smart Wallets

- Updated `signMessage`, `signTypedData`, and `sendTransaction` methods of the smart wallet client:

- signMessage

- signTypedData

- sendTransaction


Report incorrect code

Copy

Ask AI

```
import {useSmartWallets} from '@privy-io/react-auth/smart-wallets';

const {client} = useSmartWallets();
// `uiOptions` and `address` are optional
const signature = await client.signMessage({message}, uiOptions, address);
const signature = await client.signMessage({message}, {uiOptions, address});
```

#### [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-2.0\#solana)  Solana

- Migrated `useSendSolanaTransaction` from `@privy-io/react-auth` to `useSendTransaction` from `@privy-io/react-auth/solana` (Solana-specific export path)

Report incorrect code

Copy

Ask AI

```
import {useSendSolanaTransaction} from '@privy-io/react-auth';
import {useSendTransaction} from '@privy-io/react-auth/solana';

...

const {sendSolanaTransaction} = useSendSolanaTransaction();
const {sendTransaction} = useSendTransaction();
```

- Removed `sendSolanaTransaction` from `usePrivy` in favor of exporting `sendTransaction` from `useSendTransaction` from `@privy-io/react-auth/solana`

Report incorrect code

Copy

Ask AI

```
import {usePrivy} from '@privy-io/react-auth';
import {useSendTransaction} from '@privy-io/react-auth/solana';

...

const {sendSolanaTransaction} = usePrivy();
const {sendTransaction} = useSendTransaction();
```

- Removed `delegateWalletAction` from `useSolanaWallets`. Use `delegateWallet` from `useDelegatedActions` instead.

Report incorrect code

Copy

Ask AI

```
import {useSolanaWallets} from '@privy-io/react-auth/solana';
import {useDelegatedActions} from '@privy-io/react-auth';

...

const {delegateWalletAction} = useSolanaWallets();
delegateWalletAction();

const {delegateWallet} = useDelegatedActions();
await delegateWallet({
  address: '<wallet to delegate>',
  chainType: 'solana',
});
```

- Removed rpcUrl from `fundWallet` from `useSolanaWallets`. Set rpcUrl in `config.solanaClusters` prop of the `PrivyProvider` instead

Report incorrect code

Copy

Ask AI

```
import {useSolanaWallets} from '@privy-io/react-auth/solana';

const {fundWallet} = useSolanaWallets();
fundWallet({
  address: '<wallet to fund>',
  cluster: {name: 'mainnet-beta', rpcUrl: 'https://api.mainnet-beta.solana.com'},
  cluster: {name: 'mainnet-beta'}
});

<PrivyProvider
  appId="your-privy-app-id"
  config={{
    ...theRestOfYourConfig,
    // Replace this with your required clusters and custom RPC URLs
    solanaClusters: [{name: 'mainnet-beta', rpcUrl: 'https://api.mainnet-beta.solana.com'}]
  }}
>
  {/* your app's content */}
</PrivyProvider>;
```

### [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-2.0\#connectors)  Connectors

- Removed the `setActiveWallet` method - use the `wallets` array directly to interact with wallets.

### [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-2.0\#callbacks)  Callbacks

- Updated all non-error [callbacks](https://docs.privy.io/authentication/user-authentication/login-methods/email) to use named arguments instead of positional arguments.

Report incorrect code

Copy

Ask AI

```
const {login} = useLogin({
  onComplete: (user, isNewUser, wasAlreadyAuthenticated, loginMethod, linkedAccount) => {
  onComplete: ({user, isNewUser, wasAlreadyAuthenticated, loginMethod, linkedAccount}) => {

    console.log(user, isNewUser, wasAlreadyAuthenticated, loginMethod, linkedAccount);
    // Any logic you'd like to execute if the user is/becomes authenticated while this
    // component is mounted
  },
  ...
  onError: (error) => { // onError will continue to stay as a singular error argument
    console.log(error)
  }})

...
 const {reauthorize} = useOAuthTokens({
  onOAuthTokenGrant: (tokens: OAuthTokens, {user}: {user: User}) => {
  onOAuthTokenGrant: ({tokens, user}) => {
    const oAuthToken = tokens.accessToken

  ...
  }})
```

[Migrating to 3.0](https://docs.privy.io/basics/react/advanced/migrating-to-3.0) [Installation](https://docs.privy.io/basics/react-native/installation)

âŒ˜I