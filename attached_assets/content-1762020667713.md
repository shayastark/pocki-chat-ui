[Skip to main content](https://docs.privy.io/basics/react/advanced/migrating-to-3.0#content-area)

[Privy Docs home page![light logo](https://mintcdn.com/privy-c2af3412/Ih_Fo3QYM486gzWq/logo/privy-logo-light.png?fit=max&auto=format&n=Ih_Fo3QYM486gzWq&q=85&s=bd297b680ace8a13db4d9ce977f93180)![dark logo](https://mintcdn.com/privy-c2af3412/Ih_Fo3QYM486gzWq/logo/privy-logo-dark.png?fit=max&auto=format&n=Ih_Fo3QYM486gzWq&q=85&s=24d83970695ab19a1803a2eb00dbea4e)](https://docs.privy.io/)

Search...

âŒ˜K

Search...

Navigation

Advanced

Migrating to 3.0

[Welcome](https://docs.privy.io/welcome) [Basics](https://docs.privy.io/basics/get-started/about) [Authentication](https://docs.privy.io/authentication/overview) [Wallets](https://docs.privy.io/wallets/overview) [Connectors](https://docs.privy.io/wallets/connectors/overview) [Policies & controls](https://docs.privy.io/controls/overview) [Transaction management](https://docs.privy.io/transaction-management/overview) [User management](https://docs.privy.io/user-management/overview) [Security](https://docs.privy.io/security/overview) [Recipes](https://docs.privy.io/recipes/overview) [API reference](https://docs.privy.io/api-reference/introduction)

On this page

- [New features and improvements ðŸŽ‰](https://docs.privy.io/basics/react/advanced/migrating-to-3.0#new-features-and-improvements-%F0%9F%8E%89)
- [Solana Updates](https://docs.privy.io/basics/react/advanced/migrating-to-3.0#solana-updates)
- [Update Peer Dependencies](https://docs.privy.io/basics/react/advanced/migrating-to-3.0#update-peer-dependencies)
- [Solana RPC configuration](https://docs.privy.io/basics/react/advanced/migrating-to-3.0#solana-rpc-configuration)
- [Replace useSolanaWallets](https://docs.privy.io/basics/react/advanced/migrating-to-3.0#replace-usesolanawallets)
- [Rename useSendTransaction](https://docs.privy.io/basics/react/advanced/migrating-to-3.0#rename-usesendtransaction)
- [Usage Examples](https://docs.privy.io/basics/react/advanced/migrating-to-3.0#usage-examples)
- [New solana wallet usage](https://docs.privy.io/basics/react/advanced/migrating-to-3.0#new-solana-wallet-usage)
- [Sign and send via hooks (with optional UI configuration)](https://docs.privy.io/basics/react/advanced/migrating-to-3.0#sign-and-send-via-hooks-with-optional-ui-configuration)
- [Other interface changes](https://docs.privy.io/basics/react/advanced/migrating-to-3.0#other-interface-changes)
- [Funding](https://docs.privy.io/basics/react/advanced/migrating-to-3.0#funding)
- [Removed/Deprecated Items](https://docs.privy.io/basics/react/advanced/migrating-to-3.0#removed%2Fdeprecated-items)
- [Updated Types](https://docs.privy.io/basics/react/advanced/migrating-to-3.0#updated-types)

This guide will help you migrate your Privy React SDK from v2.x.x to v3.0.0.To install the latest version:

Report incorrect code

Copy

Ask AI

```
npm i @privy-io/react-auth@3
```

## [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-3.0\#new-features-and-improvements-%F0%9F%8E%89)  New features and improvements ðŸŽ‰

- Simplified Solana integration with one wallet per account and direct method access
- Streamlined peer dependencies required for Solana
- Removal of deprecated fields and methods

For the full set of changes check out our [changelog](https://docs.privy.io/changelogs/react-auth).

## [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-3.0\#solana-updates)  Solana Updates

### [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-3.0\#update-peer-dependencies)  Update Peer Dependencies

If your app uses Privyâ€™s Solana wallets, the required peer dependencies have changed in v3.0:**Remove these peer dependencies:**

- `@solana/web3.js`
- `@solana/spl-token`

**Install these new peer dependencies:**

- `@solana/kit`
- `@solana-program/memo`
- `@solana-program/system`
- `@solana-program/token`

Webpack configurations

Additionally, if you are using webpack, include the following configurations to add them to webpackâ€™s `externals` config. Note that these configurations are not needed if you are using Turbopack:

Report incorrect code

Copy

Ask AI

```
// webpack.config.js
module.exports = {
  //...
  externals: {
    ['@solana/kit']: 'commonjs @solana/kit',
    ['@solana-program/memo']: 'commonjs @solana-program/memo',
    ['@solana-program/system']: 'commonjs @solana-program/system',
    ['@solana-program/token']: 'commonjs @solana-program/token'
  }
};

// next.config.js
module.exports = {
  webpack: (config) => {
    // ...
    config.externals['@solana/kit'] = 'commonjs @solana/kit';
    config.externals['@solana-program/memo'] = 'commonjs @solana-program/memo';
    config.externals['@solana-program/system'] = 'commonjs @solana-program/system';
    config.externals['@solana-program/token'] = 'commonjs @solana-program/token';
    return config;
  }
};
```

### [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-3.0\#solana-rpc-configuration)  Solana RPC configuration

- For Privy embedded wallet flows only (UI `signTransaction` and `signAndSendTransaction`), set RPCs in `config.solana.rpcs`. This replaces `solanaClusters`.

Report incorrect code

Copy

Ask AI

```
import {createSolanaRpc, createSolanaRpcSubscriptions} from '@solana/kit';

<PrivyProvider
  appId="your-privy-app-id"
  config={{
    ...theRestOfYourConfig,
    solanaClusters: [{name: 'mainnet-beta', rpcUrl: 'https://api.mainnet-beta.solana.com'}]
    solana: {
      rpcs: {
        'solana:mainnet': {
          rpc: createSolanaRpc('https://api.mainnet-beta.solana.com'),
          rpcSubscriptions: createSolanaRpcSubscriptions('wss://api.mainnet-beta.solana.com')
        },
      }
    }
  }}
>
  {/* your app's content */}
</PrivyProvider>;
```

### [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-3.0\#replace-usesolanawallets)  Replace `useSolanaWallets`

- Replace `useSolanaWallets` with `useWallets`, `useCreateWallet`, and `useExportWallet` from the Solana entrypoint. The new `useWallets` hook returns `ConnectedStandardSolanaWallet[]`.

Report incorrect code

Copy

Ask AI

```
import {useSolanaWallets} from '@privy-io/react-auth/solana';
import {useWallets, useCreateWallet, useExportWallet} from '@privy-io/react-auth/solana';

const {ready, wallets, createWallet, exportWallet} = useSolanaWallets();
const {ready, wallets} = useWallets();
const {createWallet} = useCreateWallet();
const {exportWallet} = useExportWallet();
```

Key differences between `ConnectedSolanaWallet` and `ConnectedStandardSolanaWallet`:

- Each `wallet` represents a single connected account
- Methods are available directly on the wallet instance:
  - `wallet.signMessage({message})`
  - `wallet.signTransaction({transaction, chain})`
  - `wallet.signAndSendTransaction({transaction, chain})`
  - `wallet.signAndSendAllTransaction({transaction, chain}[])`
  - `wallet.disconnect()`
- The [Solana standard wallet](https://docs.phantom.com/developer-powertools/wallet-standard) is available at `wallet.standardWallet` (for icon/name/etc.)
- **Removed `wallet.loginOrLink()` method** \- Use `useLoginWithSiws` and `useLinkWithSiws` instead:

Report incorrect code

Copy

Ask AI

```
import {useLoginWithSiws, useLinkWithSiws} from '@privy-io/react-auth';

const {generateSiwsMessage, loginWithSiws} = useLoginWithSiws();
const {generateSiwsMessage, linkWithSiws} = useLinkWithSiws();

// Login flow
await wallets[0].loginOrLink();
const message = await generateSiwsMessage({address: wallets[0].address});
const encodedMessage = new TextEncoder().encode(message);
const results = await wallets[0].signMessage({message: encodedMessage});
await loginWithSiws({message: encodedMessage, signature: results.signature});

// Link flow (similar pattern with linkWithSiws)
const results = await wallets[0].signMessage({message: encodedMessage});
await linkWithSiws({message: encodedMessage, signature: results.signature});
```

### [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-3.0\#rename-usesendtransaction)  Rename `useSendTransaction`

- Update `useSendTransaction` from `@privy-io/react-auth/solana` to `useSignAndSendTransaction` from `@privy-io/react-auth/solana`

Report incorrect code

Copy

Ask AI

```
import {useSendTransaction} from '@privy-io/react-auth/solana';
import {useSignAndSendTransaction} from '@privy-io/react-auth/solana';

...

const {sendTransaction} = useSendTransaction();
const {signAndSendTransaction} = useSignAndSendTransaction();
```

### [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-3.0\#usage-examples)  Usage Examples

- All Solana RPCs now expect buffer inputs.

#### [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-3.0\#new-solana-wallet-usage)  New solana wallet usage

Report incorrect code

Copy

Ask AI

```
import {useWallets, type ConnectedStandardSolanaWallet} from '@privy-io/react-auth/solana';
import {TextEncoder} from '@solana/kit';

export function SolanaWallets() {
  const {ready, wallets} = useWallets();
  if (!ready) return <p>Loading...</p>;

  return (
    <div>
      {wallets.map((wallet: ConnectedStandardSolanaWallet) => (
        <div key={wallet.address}>
          <img src={wallet.standardWallet.icon} width={16} height={16} />
          <span>{wallet.standardWallet.name}</span>
          <code>{wallet.address}</code>
          <button
            onClick={async () => {
              const message = new TextEncoder().encode('Hello, world!');
              const {signature} = await wallet.signMessage({message});
              console.log('signature', signature);
            }}
          >
            Sign message
          </button>
        </div>
      ))}
    </div>
  );
}
```

#### [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-3.0\#sign-and-send-via-hooks-with-optional-ui-configuration)  Sign and send via hooks (with optional UI configuration)

Report incorrect code

Copy

Ask AI

```
import {
  useWallets,
  useSignMessage,
  useSignTransaction,
  useSignAndSendTransaction
} from '@privy-io/react-auth/solana';

export function Actions() {
  const {wallets} = useWallets();
  const {signMessage} = useSignMessage();
  const {signTransaction} = useSignTransaction();
  const {signAndSendTransaction} = useSignAndSendTransaction();

  const wallet = wallets[0];
  if (!wallet) return null;

  return (
    <div>
      <button
        onClick={async () => {
          const message = new TextEncoder().encode('Hello from Privy');
          const {signature} = await signMessage({
            wallet,
            message,
            options: {uiOptions: {showWalletUIs: true}}
          });
          console.log(signature);
        }}
      >
        Sign message (hook)
      </button>

      <button
        onClick={async () => {
          // Create an encoded transaction using @solana/kit or @web3.js
          const transaction = tx; // type Uint8Array
          const {signedTransaction} = await signTransaction({
            wallet,
            transaction,
            chain: 'solana:devnet'
          });
          console.log(signedTransaction);
        }}
      >
        Sign transaction (hook)
      </button>

      <button
        onClick={async () => {
          // Create an encoded transaction using @solana/kit or @web3.js
          const transaction = tx; // type Uint8Array
          const {signature} = await signAndSendTransaction({
            wallet,
            transaction,
            chain: 'solana:devnet'
          });
          console.log(signature);
        }}
      >
        Sign & send (hook)
      </button>
    </div>
  );
}
```

## [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-3.0\#other-interface-changes)  Other interface changes

### [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-3.0\#funding)  Funding

- **Updated `fundWallet` interface**

Report incorrect code

Copy

Ask AI

```
import {useFundWallet: useFundSolanaWallet} from '@privy-io/react-auth/solana';
import {useFundWallet: useFundEthereumWallet} from '@privy-io/react-auth';

...

const {fundWallet} = useFundSolanaWallet();
await fundWallet('<solana address>', {amount: '1', asset: 'native-currency', chain: 'solana:devnet'});
await fundWallet({
  address: '<solana address>',
  options: {amount: '1', asset: 'SOL', chain: 'solana:devnet'}
});

const {fundWallet} = useFundEthereumWallet();
await fundWallet('<ethereum address>', {amount: '1000', asset: 'native-currency', chain: {id: 1}});
await fundWallet({
  address: '<ethereum address>',
  options: {amount: '1000', asset: 'native-currency', chain: {id: 1}}
});
```

## [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-3.0\#removed%2Fdeprecated-items)  Removed/Deprecated Items

- **Removed `suggestedAddress` from `connectWallet` and `linkWallet`**

Report incorrect code

Copy

Ask AI

```
connectWallet({suggestedAddress: '0x123...'});
connectWallet({description: `Connect the wallet with address ${address}`});
```

- **Removed `detected_wallets` from wallet lists/configuration**

Report incorrect code

Copy

Ask AI

```
<PrivyProvider
  config={{
    appearance: {
      walletList: [\
        'detected_wallets',\
        'detected_ethereum_wallets',\
        'detected_solana_wallets',\
        'metamask'\
        // ...\
      ]
    }
    // ...
  }}
>
  {/* your app's content */}
</PrivyProvider>
```

- **Removed deprecated Moonpay config and types, add config to `PrivyProviderConfig` instead**

Report incorrect code

Copy

Ask AI

```
fundEvmWallet(address, {
  config: {
    currencyCode: 'ETH_ETHEREUM',
    quoteCurrencyAmount: 0.01
  },
  provider: 'moonpay'
});

<PrivyProvider
  config={{
    fundingMethodConfig: {moonpay: {useSandbox: true}}
    // ...
  }}
>
  ...
</PrivyProvider>;

fundEvmWallet(address, {
  chain: mainnet,
  amount: '0.01',
  defaultFundingMethod: 'card'
});
```

- **Removed deprecated `requireUserPasswordOnCreate` and related embedded wallet config fields**
- \*\*Removed `embeddedWallets` level `createOnLogin` field. Use `embeddedWallets.etherum.createOnLogin` or `embeddedWallets.solana.createOnLogin` instead. \*\*

Report incorrect code

Copy

Ask AI

```
<PrivyProvider
  config={{
    embeddedWallets: {
      requireUserPasswordOnCreate: true,
      createOnLogin: 'all-users',
      ethereum: {createOnLogin: 'all-users'}
      // ...
    }
    // ...
  }}
>
  {/* your app's content */}
</PrivyProvider>
```

- **Removed `useLoginToFrame` and replaced with `useLoginToMiniApp`**

Report incorrect code

Copy

Ask AI

```
export {useLoginToFrame} from '@privy-io/react-auth';
export {useLoginToMiniApp} from '@privy-io/react-auth';
```

- **Removed `useSignAuthorization()` \- Use `useSign7702Authorization()` instead**

Report incorrect code

Copy

Ask AI

```
import {useSignAuthorization} from '@privy-io/react-auth';
import {useSign7702Authorization} from '@privy-io/react-auth';

const {signAuthorization} = useSignAuthorization();
const {sign7702Authorization} = useSign7702Authorization();
```

- **Removed `useSetWalletPassword()` \- Use `useSetWalletRecovery` instead**

Report incorrect code

Copy

Ask AI

```
import {useSetWalletPassword} from '@privy-io/react-auth';
import {useSetWalletRecovery} from '@privy-io/react-auth';

const {setWalletPassword} = useSetWalletPassword();
const {setWalletRecovery} = useSetWalletRecovery();
```

### [â€‹](https://docs.privy.io/basics/react/advanced/migrating-to-3.0\#updated-types)  Updated Types

- **Removed `verifiedAt` from `LinkMetadata` and all linked accounts. Use `firstVerifiedAt` and `latestVerifiedAt` instead of the deprecated `verifiedAt`.**

Report incorrect code

Copy

Ask AI

```
const verifiedDate = user.wallet.verifiedAt;
const verifiedDate = user.wallet.firstVerifiedA;
```

[Automatic wallet creation](https://docs.privy.io/basics/react/advanced/automatic-wallet-creation) [Migrating to 2.0](https://docs.privy.io/basics/react/advanced/migrating-to-2.0)

âŒ˜I