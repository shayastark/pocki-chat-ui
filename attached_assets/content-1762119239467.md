[Skip to main content](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi#content-area)

[Privy Docs home page![light logo](https://mintcdn.com/privy-c2af3412/Ih_Fo3QYM486gzWq/logo/privy-logo-light.png?fit=max&auto=format&n=Ih_Fo3QYM486gzWq&q=85&s=bd297b680ace8a13db4d9ce977f93180)![dark logo](https://mintcdn.com/privy-c2af3412/Ih_Fo3QYM486gzWq/logo/privy-logo-dark.png?fit=max&auto=format&n=Ih_Fo3QYM486gzWq&q=85&s=24d83970695ab19a1803a2eb00dbea4e)](https://docs.privy.io/)

Search...

âŒ˜K

Search...

Navigation

Ethereum

Integrating with wagmi

[Welcome](https://docs.privy.io/welcome) [Basics](https://docs.privy.io/basics/get-started/about) [Authentication](https://docs.privy.io/authentication/overview) [Wallets](https://docs.privy.io/wallets/overview) [Connectors](https://docs.privy.io/wallets/connectors/overview) [Policies & controls](https://docs.privy.io/controls/overview) [Transaction management](https://docs.privy.io/transaction-management/overview) [User management](https://docs.privy.io/user-management/overview) [Security](https://docs.privy.io/security/overview) [Recipes](https://docs.privy.io/recipes/overview) [API reference](https://docs.privy.io/api-reference/introduction)

On this page

- [Integration steps](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi#integration-steps)
- [1\. Install dependencies](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi#1-install-dependencies)
- [2\. Setup TanStack Query](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi#2-setup-tanstack-query)
- [3\. Setup wagmi](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi#3-setup-wagmi)
- [Build your wagmi config](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi#build-your-wagmi-config)
- [Wrap your app with the WagmiProvider](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi#wrap-your-app-with-the-wagmiprovider)
- [Complete example](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi#complete-example)
- [4\. Use wagmi throughout your app](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi#4-use-wagmi-throughout-your-app)
- [Using wagmi hooks](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi#using-wagmi-hooks)
- [When to use Privy vs. wagmi](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi#when-to-use-privy-vs-wagmi)
- [Updating the active wallet](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi#updating-the-active-wallet)
- [Demo app](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi#demo-app)

[Wagmi](https://wagmi.sh/) is a set of React hooks for interfacing with Ethereum wallets, allowing you read wallet state, request signatures or transactions, and take read and write actions on the blockchain.**Privy is fully compatible with [wagmi](https://wagmi.sh/), and you can use [wagmi](https://wagmi.sh/)â€™s React hooks to interface with external and embedded wallets from Privy.** Just follow the steps below!

## [â€‹](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi\#integration-steps)  Integration steps

This guide assumes you have already integrated Privy into your app. If not, please begin with the Privy [Quickstart](https://docs.privy.io/basics/react/quickstart).

### [â€‹](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi\#1-install-dependencies)  1\. Install dependencies

Install the latest versions of [**`wagmi`**](https://www.npmjs.com/package/wagmi), [**`@tanstack/react-query`**](https://www.npmjs.com/package/@tanstack/react-query), [**`@privy-io/react-auth`**](https://www.npmjs.com/package/@privy-io/react-auth), and [**`@privy-io/wagmi`**](https://www.npmjs.com/package/@privy-io/wagmi):

Report incorrect code

Copy

Ask AI

```
npm i wagmi @privy-io/react-auth @privy-io/wagmi @tanstack/react-query
```

### [â€‹](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi\#2-setup-tanstack-query)  2\. Setup TanStack Query

To start, set up your app with the [TanStack Queryâ€™s React Provider](https://tanstack.com/query/v5/docs/framework/react/overview). Wagmi uses TanStack Query under the hood to power its data fetching and caching of wallet and blockchain data.To set up your app with TanStack Query, in the component where you render your **`PrivyProvider`**, import the [**`QueryClient`**](https://tanstack.com/query/v4/docs/reference/QueryClient) class and the [**`QueryClientProvider`**](https://tanstack.com/query/latest/docs/framework/react/reference/QueryClientProvider) component from [**`@tanstack/react-query`**](https://www.npmjs.com/package/@tanstack/react-query):

Report incorrect code

Copy

Ask AI

```
import {QueryClient, QueryClientProvider} from '@tanstack/react-query';
```

Next, create a new instance of the [**`QueryClient`**](https://tanstack.com/query/v4/docs/reference/QueryClient):

Report incorrect code

Copy

Ask AI

```
const queryClient = new QueryClient();
```

Then, like the **`PrivyProvider`**, wrap your appâ€™s components with the [**`QueryClientProvider`**](https://tanstack.com/query/latest/docs/framework/react/reference/QueryClientProvider). This must be rendered _inside_ the **`PrivyProvider`** component.

providers.tsx

Report incorrect code

Copy

Ask AI

```
<PrivyProvider appId="your-privy-app-id" config={insertYourPrivyConfig}>
  <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>
</PrivyProvider>
```

For the [**`client`**](https://tanstack.com/query/latest/docs/framework/react/reference/QueryClientProvider) property of the [**`QueryClientProvider`**](https://tanstack.com/query/latest/docs/framework/react/reference/QueryClientProvider), pass the [**`queryClient`**](https://tanstack.com/query/v4/docs/reference/QueryClient) instance you created.

### [â€‹](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi\#3-setup-wagmi)  3\. Setup wagmi

Next, setup wagmi. This involves creating your wagmi **`config`** and wrapping your app with the **`WagmiProvider`**.

While completing the wagmi setup, make sure to import `createConfig` and `WagmiProvider` from
`@privy-io/wagmi`. Do not import these from `wagmi` directly.

#### [â€‹](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi\#build-your-wagmi-config)  Build your wagmi config

To build your [**`wagmi`**](https://wagmi.sh/) config, import the `createConfig` method from [**`@privy-io/wagmi`**](https://www.npmjs.com/package/@privy-io/wagmi):

wagmiConfig.ts

Report incorrect code

Copy

Ask AI

```
import {createConfig} from '@privy-io/wagmi';
```

This is a drop-in replacement for [wagmiâ€™s native **`createConfig`**](https://wagmi.sh/react/getting-started#create-config), but ensures that the appropriate configuration options are set for the Privy integration. Specifically, it allows Privy to drive wagmiâ€™s connectors state, enabling the two libraries to stay in sync.Next, import your appâ€™s required chains from [**`viem/chains`**](https://viem.sh/docs/chains/introduction.html) and the [**`http`**](https://wagmi.sh/core/api/transports/http#http) transport from [**`wagmi`**](https://www.npmjs.com/package/wagmi). Your appâ€™s required chains should match whatever you configure as [**`supportedChains`**](https://docs.privy.io/basics/react/advanced/configuring-evm-networks#supported-chains) for Privy.

Report incorrect code

Copy

Ask AI

```
import {mainnet, sepolia} from 'viem/chains';
import {http} from 'wagmi';

// Replace this with your app's required chains
```

Lastly, call `createConfig` with your imported chains and the [**`http`**](https://wagmi.sh/core/api/transports/http#http) transport like so:

wagmiConfig.ts

Report incorrect code

Copy

Ask AI

```
// Make sure to import `createConfig` from `@privy-io/wagmi`, not `wagmi`
import {createConfig} from '@privy-io/wagmi';
...
export const config = createConfig({
  chains: [mainnet, sepolia], // Pass your required chains as an array
  transports: {
    [mainnet.id]: http(),
    [sepolia.id]: http(),
    // For each of your required chains, add an entry to `transports` with
    // a key of the chain's `id` and a value of `http()`
  },
});
```

#### [â€‹](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi\#wrap-your-app-with-the-wagmiprovider)  Wrap your app with the `WagmiProvider`

Once youâ€™ve built your wagmi `config`, in the same component where you render your **`PrivyProvider`**, import the `WagmiProvider` component from [**`@privy-io/wagmi`**](https://www.npmjs.com/package/@privy-io/wagmi).

Report incorrect code

Copy

Ask AI

```
import {WagmiProvider} from '@privy-io/wagmi';
```

This is a drop-in replacement for [wagmiâ€™s native **`WagmiProvider`**](https://wagmi.sh/react/api/WagmiProvider#wagmiprovider), but ensures the necessary configuration properties for Privy are set. Specifically, it ensures that the [**`reconnectOnMount`**](https://wagmi.sh/react/api/WagmiProvider#reconnectonmount) prop is set to false, which is required for handling the embedded wallet. Wallets will still be automatically reconnected on mount.Then, like the **`PrivyProvider`**, wrap your appâ€™s components with the `WagmiProvider`. This must be rendered _inside_ both the **`PrivyProvider`** and [**`QueryClientProvider`**](https://tanstack.com/query/latest/docs/framework/react/reference/QueryClientProvider) components.

providers.tsx

Report incorrect code

Copy

Ask AI

```
import {PrivyProvider} from '@privy-io/react-auth';
// Make sure to import `WagmiProvider` from `@privy-io/wagmi`, not `wagmi`
import {WagmiProvider} from '@privy-io/wagmi';
import {QueryClientProvider} from '@tanstack/react-query';
...
<PrivyProvider appId='insert-your-privy-app-id' config={insertYourPrivyConfig}>
  <QueryClientProvider client={queryClient}>
    <WagmiProvider config={config}>
      {children}
    </WagmiProvider>
  </QueryClientProvider>
</PrivyProvider>
```

For the `config` property of the `WagmiProvider`, pass the `config` you created earlier.

#### [â€‹](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi\#complete-example)  Complete example

Altogether, this should look like:

- providers.tsx

- wagmiConfig.ts

- privyConfig.ts


Report incorrect code

Copy

Ask AI

```
import {QueryClient, QueryClientProvider} from '@tanstack/react-query';

import {PrivyProvider} from '@privy-io/react-auth';
// Make sure to import these from `@privy-io/wagmi`, not `wagmi`
import {WagmiProvider, createConfig} from '@privy-io/wagmi';

import {privyConfig} from './privyConfig';
import {wagmiConfig} from './wagmiConfig';

const queryClient = new QueryClient();

export default function Providers({children}: {children: React.ReactNode}) {
  return (
    <PrivyProvider appId="insert-your-privy-app-id" config={privyConfig}>
      <QueryClientProvider client={queryClient}>
        <WagmiProvider config={wagmiConfig}>{children}</WagmiProvider>
      </QueryClientProvider>
    </PrivyProvider>
  );
}
```

**Thatâ€™s it! Youâ€™ve successfully integrated Privy alongside [`wagmi`](https://wagmi.sh/) in your app! ðŸŽ‰**

### [â€‹](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi\#4-use-wagmi-throughout-your-app)  4\. Use `wagmi` throughout your app

Once youâ€™ve completed the setup above, you can use [**`wagmi`**](https://wagmi.sh/)â€™s React hooks throughout your app to interface with wallets and take read and write actions on the blockchain.

#### [â€‹](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi\#using-wagmi-hooks)  Using `wagmi` hooks

To use [**`wagmi`**](https://wagmi.sh/) hooks, like [**`useAccount`**](https://wagmi.sh/react/api/hooks/useAccount#useaccount), in your components, import the hook directly from [**`wagmi`**](https://wagmi.sh/) and call it as usual:

Report incorrect code

Copy

Ask AI

```
import {useAccount} from 'wagmi';

export default const WalletAddress = () => {
  const {address} = useAccount();
  return <p>Wallet address: {address}</p>;
}
```

Injected wallets, like the MetaMask browser extension, cannot be programmatically disconnected from your site; they can only be manually disconnected. In kind, Privy does not currently support programmatically disconnecting a wallet via wagmiâ€™s [`useDisconnect`](https://wagmi.sh/react/api/hooks/useDisconnect) hook. This hook â€œshimsâ€ a disconnection, which can create discrepancies between what wallets are connected to an app vs. wagmi.Instead of disconnecting a given wallet, you can always prompt a user to connect a different wallet via the [`connectWallet`](https://docs.privy.io/wallets/connectors/usage/connecting-external-wallets) method.

#### [â€‹](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi\#when-to-use-privy-vs-wagmi)  When to use Privy vs. `wagmi`

Both Privyâ€™s out-of-the-box interfaces and wagmiâ€™s React hooks enable you to interface with wallets and to request signatures and transactions.If your app integrates Privy alongside wagmi, you should:

- use Privy to connect external wallets and create embedded wallets
- use [**`wagmi`**](https://wagmi.sh/) to take read or write actions from a connected wallet

#### [â€‹](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi\#updating-the-active-wallet)  Updating the active wallet

With Privy, users may have multiple wallets connected to your app, but [**`wagmi`**](https://wagmi.sh/)â€™s React hooks return information for only _one_ connected wallet at a time. This is referred to as the **active wallet**.To update [**`wagmi`**](https://wagmi.sh/) to return information for a _different_ connected wallet, first import the **`useWallets`** hook from [**`@privy-io/react-auth`**](https://www.npmjs.com/package/@privy-io/react-auth) and the `useSetActiveWallet` hook from [**`@privy-io/wagmi`**](https://www.npmjs.com/package/@privy-io/wagmi):

Report incorrect code

Copy

Ask AI

```
import {useWallets} from '@privy-io/react-auth';
import {useSetActiveWallet} from '@privy-io/wagmi';
```

Then, find your desired active wallet from the **`wallets`** array returned by **`useWallets`**

Report incorrect code

Copy

Ask AI

```
const {wallets} = useWallets();
// Replace this logic to find your desired wallet
const newActiveWallet = wallets.find((wallet) => wallet.address === 'insert-your-desired-address');
```

Lastly, pass your desired active wallet to the `setActiveWallet` method returned by the `useSetActiveWallet` hook:

Report incorrect code

Copy

Ask AI

```
await setActiveWallet(newActiveWallet);
```

## [â€‹](https://docs.privy.io/wallets/connectors/ethereum/integrations/wagmi\#demo-app)  Demo app

Check out our [wagmi demo app](https://wagmi-app.vercel.app/) to see the hooks listed above in action.Feel free to take a look at the [appâ€™s source code](https://github.com/privy-io/examples/tree/main/examples/privy-next-wagmi) to see an end-to-end implementation of Privy with wagmi.

[Integrating with viem](https://docs.privy.io/wallets/connectors/ethereum/integrations/viem) [Integrating with ethers](https://docs.privy.io/wallets/connectors/ethereum/integrations/ethers)

âŒ˜I